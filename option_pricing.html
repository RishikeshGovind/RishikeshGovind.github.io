<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rishikesh Govind">
<meta name="dcterms.date" content="2023-09-25">

<title>Option Pricing Simulator Overview</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="option_pricing_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="option_pricing_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="option_pricing_files/libs/quarto-html/popper.min.js"></script>
<script src="option_pricing_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="option_pricing_files/libs/quarto-html/anchor.min.js"></script>
<link href="option_pricing_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="option_pricing_files/libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="option_pricing_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="option_pricing_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="option_pricing_files/libs/bootstrap/bootstrap-16bbabe37efa2ecafad14e96199f1a13.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#literature-context-and-motivation" id="toc-literature-context-and-motivation" class="nav-link" data-scroll-target="#literature-context-and-motivation">Literature Context and Motivation</a>
  <ul class="collapse">
  <li><a href="#foundations-of-european-option-valuation" id="toc-foundations-of-european-option-valuation" class="nav-link" data-scroll-target="#foundations-of-european-option-valuation">1. Foundations of European Option Valuation</a></li>
  <li><a href="#motivation-for-a-unified-interactive-platform" id="toc-motivation-for-a-unified-interactive-platform" class="nav-link" data-scroll-target="#motivation-for-a-unified-interactive-platform">2. Motivation for a Unified Interactive Platform</a></li>
  </ul></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">Methodology</a>
  <ul class="collapse">
  <li><a href="#model-inputs-and-riskneutral-framework" id="toc-model-inputs-and-riskneutral-framework" class="nav-link" data-scroll-target="#model-inputs-and-riskneutral-framework">1. Model Inputs and Risk‐Neutral Framework</a>
  <ul class="collapse">
  <li><a href="#parameter-specification" id="toc-parameter-specification" class="nav-link" data-scroll-target="#parameter-specification">1.1 Parameter Specification</a></li>
  <li><a href="#underlying-price-retrieval" id="toc-underlying-price-retrieval" class="nav-link" data-scroll-target="#underlying-price-retrieval">1.2 Underlying Price Retrieval</a></li>
  </ul></li>
  <li><a href="#blackscholes-analytical-module" id="toc-blackscholes-analytical-module" class="nav-link" data-scroll-target="#blackscholes-analytical-module">2. Black–Scholes Analytical Module</a>
  <ul class="collapse">
  <li><a href="#assumptions-and-pde-derivation" id="toc-assumptions-and-pde-derivation" class="nav-link" data-scroll-target="#assumptions-and-pde-derivation">2.1 Assumptions and PDE Derivation</a></li>
  <li><a href="#closedform-solution-and-greeks" id="toc-closedform-solution-and-greeks" class="nav-link" data-scroll-target="#closedform-solution-and-greeks">2.2 Closed‐Form Solution and Greeks</a></li>
  <li><a href="#academic-considerations" id="toc-academic-considerations" class="nav-link" data-scroll-target="#academic-considerations">2.3 Academic Considerations</a></li>
  </ul></li>
  <li><a href="#recombining-binomial-lattice-module" id="toc-recombining-binomial-lattice-module" class="nav-link" data-scroll-target="#recombining-binomial-lattice-module">3. Recombining Binomial Lattice Module</a>
  <ul class="collapse">
  <li><a href="#discretetime-approximation" id="toc-discretetime-approximation" class="nav-link" data-scroll-target="#discretetime-approximation">3.1 Discrete‐Time Approximation</a></li>
  <li><a href="#riskneutral-probabilities-and-backward-induction" id="toc-riskneutral-probabilities-and-backward-induction" class="nav-link" data-scroll-target="#riskneutral-probabilities-and-backward-induction">3.2 Risk‐Neutral Probabilities and Backward Induction</a></li>
  <li><a href="#convergence-analysis" id="toc-convergence-analysis" class="nav-link" data-scroll-target="#convergence-analysis">3.3 Convergence Analysis</a></li>
  <li><a href="#extensions" id="toc-extensions" class="nav-link" data-scroll-target="#extensions">3.4 Extensions</a></li>
  </ul></li>
  <li><a href="#monte-carlo-simulation-module" id="toc-monte-carlo-simulation-module" class="nav-link" data-scroll-target="#monte-carlo-simulation-module">4. Monte Carlo Simulation Module</a>
  <ul class="collapse">
  <li><a href="#geometric-brownian-motion-sampling" id="toc-geometric-brownian-motion-sampling" class="nav-link" data-scroll-target="#geometric-brownian-motion-sampling">4.1 Geometric Brownian Motion Sampling</a></li>
  <li><a href="#payoff-averaging-and-discounting" id="toc-payoff-averaging-and-discounting" class="nav-link" data-scroll-target="#payoff-averaging-and-discounting">4.2 Payoff Averaging and Discounting</a></li>
  <li><a href="#variance-reduction-techniques-optional" id="toc-variance-reduction-techniques-optional" class="nav-link" data-scroll-target="#variance-reduction-techniques-optional">4.3 Variance Reduction Techniques (Optional)</a></li>
  <li><a href="#computational-considerations" id="toc-computational-considerations" class="nav-link" data-scroll-target="#computational-considerations">4.4 Computational Considerations</a></li>
  </ul></li>
  <li><a href="#convergence-and-sensitivity-analysis-module" id="toc-convergence-and-sensitivity-analysis-module" class="nav-link" data-scroll-target="#convergence-and-sensitivity-analysis-module">5. Convergence and Sensitivity Analysis Module</a>
  <ul class="collapse">
  <li><a href="#empirical-convergence-studies" id="toc-empirical-convergence-studies" class="nav-link" data-scroll-target="#empirical-convergence-studies">5.1 Empirical Convergence Studies</a></li>
  <li><a href="#sensitivity-greek-visualisation" id="toc-sensitivity-greek-visualisation" class="nav-link" data-scroll-target="#sensitivity-greek-visualisation">5.2 Sensitivity (Greek) Visualisation</a></li>
  </ul></li>
  <li><a href="#visualisation-and-user-interface" id="toc-visualisation-and-user-interface" class="nav-link" data-scroll-target="#visualisation-and-user-interface">6. Visualisation and User Interface</a></li>
  </ul></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a>
  <ul class="collapse">
  <li><a href="#comparative-analysis-of-pricing-methods" id="toc-comparative-analysis-of-pricing-methods" class="nav-link" data-scroll-target="#comparative-analysis-of-pricing-methods">1. Comparative Analysis of Pricing Methods</a></li>
  <li><a href="#pedagogical-insights" id="toc-pedagogical-insights" class="nav-link" data-scroll-target="#pedagogical-insights">2. Pedagogical Insights</a></li>
  <li><a href="#research-and-extension-potential" id="toc-research-and-extension-potential" class="nav-link" data-scroll-target="#research-and-extension-potential">3. Research and Extension Potential</a></li>
  <li><a href="#limitations-and-practical-considerations" id="toc-limitations-and-practical-considerations" class="nav-link" data-scroll-target="#limitations-and-practical-considerations">4. Limitations and Practical Considerations</a></li>
  </ul></li>
  <li><a href="#conclusion-and-future-directions" id="toc-conclusion-and-future-directions" class="nav-link" data-scroll-target="#conclusion-and-future-directions">Conclusion and Future Directions</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Option Pricing Simulator Overview</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Rishikesh Govind </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 1, 2025</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    <p>This document provides an academic perspective on a Python-based interactive application for pricing European options. Rather than detailing implementation specifics, it situates the project within foundational academic literature on option valuation, outlines the theoretical underpinnings of each pricing methodology, discusses empirical convergence and sensitivity analyses, and reflects on the pedagogical and research implications of integrating multiple models in a unified interface.</p>
  </div>
</div>


</header>


<div style="margin-bottom: 1rem;">
<p><a href="https://option-pricing-app-gceooubxr85x4y9lbsqxvn.streamlit.app/" class="btn btn-primary" role="button" target="_blank" rel="noopener"> Launch App </a></p>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Option pricing lies at the core of modern financial theory and practice. Beginning with the seminal Black–Scholes model (Black &amp; Scholes, 1973) and its later numerical extensions (Cox, Ross, &amp; Rubinstein, 1979; Boyle, 1977), academic research has continuously refined techniques to value derivatives under various stochastic frameworks. The Option Pricing Streamlit App exemplifies this tradition by unifying three canonical European‐option pricing methods—the Black–Scholes closed‐form solution, the recombining binomial lattice, and Monte Carlo simulation—into a single interactive dashboard. Rather than merely serving as a codebase, this application functions as an academic demonstration: it allows learners and researchers to manipulate model parameters (underlying price, strike, volatility, maturity, risk‐free rate), observe real‐time valuations, and compare convergence behavior across methods.</p>
<p>From an academic standpoint, the app bridges theoretical derivations (e.g., solving the Black–Scholes partial differential equation via risk-neutral valuation) with empirical intuition obtained through numerical approximation. For researchers, the platform facilitates exploratory analyses—such as assessing discretisation error in binomial trees or variance reduction in Monte Carlo estimators—and can serve as a prototype for extensions involving stochastic volatility or jump‐diffusion processes. This overview outlines the <strong>motivation</strong> for integrating multiple pricing approaches in one interface, situates the app within established literature on option valuation, explicates the <strong>methodological foundations</strong> of each module, and reflects on <strong>empirical insights</strong>, <strong>limitations</strong>, and <strong>future directions</strong>.</p>
<hr>
</section>
<section id="literature-context-and-motivation" class="level1">
<h1>Literature Context and Motivation</h1>
<section id="foundations-of-european-option-valuation" class="level2">
<h2 class="anchored" data-anchor-id="foundations-of-european-option-valuation">1. Foundations of European Option Valuation</h2>
<ul>
<li><p><strong>Black–Scholes Analytical Framework</strong></p>
<p>Fischer Black and Myron Scholes (1973), later complemented by Robert Merton (1973), derived a closed‐form solution for European call and put options under the assumptions of lognormal asset dynamics, constant volatility, and frictionless markets. By solving the Black–Scholes partial differential equation (PDE) subject to terminal payoff conditions, they demonstrated that an option price could be expressed as:<br>
<span class="math display">\[
  C(S_0, K, T, r, \sigma) = S_0\,\Phi(d_1) - K\,e^{-rT}\,\Phi(d_2)
\]</span><br>
where<br>
<span class="math display">\[
  d_{1} = \frac{\ln\bigl(S_0 / K \bigr) + \bigl(r + \tfrac{1}{2}\sigma^2\bigr)T}{\sigma\sqrt{T}},
  \quad
  d_{2} = d_1 - \sigma\sqrt{T}
\]</span><br>
and <span class="math inline">\(\Phi()\)</span> is the standard normal cumulative distribution function (Black &amp; Scholes, 1973; Merton, 1973). This breakthrough established risk‐neutral valuation—discounting expected payoffs under a martingale measure—as the cornerstone of derivative pricing.</p></li>
<li><p><strong>Binomial Lattice Approximation</strong></p>
<p>Recognising that continuous‐time models may not capture certain market features (e.g., early exercise, discrete dividends), Cox, Ross, and Rubinstein (1979) introduced a discrete‐time binomial lattice. By partitioning the time interval <span class="math inline">\([0, T]\)</span> into <span class="math inline">\(M\)</span> steps of size <span class="math inline">\(\Delta t = T/M\)</span>, they modeled the underlying asset price <span class="math inline">\(S_t\)</span> to move up by factor <span class="math inline">\(u = e^{\sigma\sqrt{\Delta t}}\)</span> or down by <span class="math inline">\(d = e^{-\sigma\sqrt{\Delta t}}\)</span> at each step. Under risk‐neutral probabilities<br>
<span class="math display">\[
  p = \frac{e^{r \Delta t} - d}{u - d},
  \quad
  1 - p = \frac{u - e^{r \Delta t}}{u - d}
\]</span><br>
the option value is obtained by backward induction on a recombining tree, converging to the Black–Scholes price as <span class="math inline">\(M \to \infty\)</span> (Cox, Ross, &amp; Rubinstein, 1979; Hull, 2018).</p></li>
<li><p><strong>Monte Carlo Simulation</strong></p>
<p>Pioneered by Broadie and Glasserman (1996) for option pricing, Monte Carlo methods approximate expectations under the risk‐neutral measure by generating a large number <span class="math inline">\(N\)</span> of sample paths for <span class="math inline">\(S_t\)</span> (often assuming geometric Brownian motion) and averaging discounted payoffs at maturity:<br>
<span class="math display">\[
  C \approx e^{-rT}\,\frac{1}{N}\sum_{i=1}^N \max\bigl(S^{(i)}_T - K,\,0 \bigr)
\]</span><br>
While computationally intensive (<span class="math inline">\(O(N)\)</span> per path), Monte Carlo offers flexibility to handle path‐dependent payoffs, stochastic volatility, or jump processes that lack closed‐form solutions (Glasserman, 2004; Boyle, Broadie, &amp; Glasserman, 1997).</p></li>
</ul>
</section>
<section id="motivation-for-a-unified-interactive-platform" class="level2">
<h2 class="anchored" data-anchor-id="motivation-for-a-unified-interactive-platform">2. Motivation for a Unified Interactive Platform</h2>
<p>Despite ample theoretical exposition in textbooks and lectures (Black &amp; Scholes, 1973; Cox, Ross, &amp; Rubinstein, 1979; Hull, 2018), students and researchers often learn individual methods in isolation—performing separate code runs or analytical exercises. An integrated interface addresses several pedagogical and research‐oriented needs:</p>
<ol type="1">
<li><p><strong>Comparative Understanding</strong></p>
<p>Juxtaposing closed‐form, lattice, and simulation‐based valuations highlights trade‐offs: analytical tractability versus numerical flexibility, convergence rates, and error sources (bias in binomial approximations vs.&nbsp;variance in Monte Carlo).</p></li>
<li><p><strong>Parameter Sensitivity Exploration</strong></p>
<p>Interactive sliders or input fields allow users to vary <span class="math inline">\(\sigma\)</span>, <span class="math inline">\(T\)</span>, or <span class="math inline">\(r\)</span> and instantly observe how option prices and Greeks (delta, gamma, vega) respond—reinforcing intuition behind phenomena like volatility skew or time decay.</p></li>
<li><p><strong>Empirical Convergence Analysis</strong></p>
<p>By adjusting the number of binomial steps <span class="math inline">\(M\)</span> or Monte Carlo paths <span class="math inline">\(N\)</span>, users can empirically verify theoretical convergence rates: binomial lattice error decaying as <span class="math inline">\(O(1/M)\)</span> for European options (Phelim P. Boyle, 1977) and Monte Carlo standard error scaling as <span class="math inline">\(O(1/\sqrt{N})\)</span> (Kloeden &amp; Platen, 1992).</p></li>
<li><p><strong>Research Prototyping</strong><br>
Modular design enables extensions—such as incorporating Heston’s stochastic volatility model (Heston, 1993) or Merton’s jump‐diffusion (Merton, 1976)—with minimal refactoring, fostering rapid experimentation.</p></li>
<li><p><strong>Bridging Theory and Practice</strong></p>
<p>Integrating market‐data fetching (e.g., via Yahoo Finance) for live underlying prices positions the app as a prototype for practitioners who wish to calibrate models to real‐world quotes or extract implied volatilities.</p></li>
</ol>
<p>In sum, the Option Pricing Streamlit App occupies a niche between textbook exposition and bespoke research code: it encapsulates foundational models, promotes empirical learning, and sets the stage for advanced academic inquiry.</p>
<hr>
</section>
</section>
<section id="methodology" class="level1">
<h1>Methodology</h1>
<section id="model-inputs-and-riskneutral-framework" class="level2">
<h2 class="anchored" data-anchor-id="model-inputs-and-riskneutral-framework">1. Model Inputs and Risk‐Neutral Framework</h2>
<section id="parameter-specification" class="level3">
<h3 class="anchored" data-anchor-id="parameter-specification">1.1 Parameter Specification</h3>
<p>Users specify:</p>
<ul>
<li><p><span class="math inline">\(S_0\)</span>: Current price of the underlying asset.</p></li>
<li><p><span class="math inline">\(K\)</span>: Option strike price.</p></li>
<li><p><span class="math inline">\(T\)</span>: Time to maturity (in years), typically computed as <span class="math inline">\(\frac{\text{days to expiration}}{252}\)</span>.</p></li>
<li><p><span class="math inline">\(r\)</span>: Continuously compounded, annualised risk‐free rate.</p></li>
<li><p><span class="math inline">\(\sigma\)</span>: Annualised volatility estimate (e.g., historical or implied).</p></li>
</ul>
<p>Under the <strong>risk‐neutral measure</strong> <span class="math inline">\(\mathbb{Q}\)</span>, the discounted asset process <span class="math inline">\(e^{-rt}S_t\)</span> is a martingale. Consequently, the no‐arbitrage price of a European call satisfies: <span class="math display">\[
  C(S_0, K, T, r, \sigma) = e^{-rT}\,\mathbb{E}^{\mathbb{Q}}\bigl[\max(S_T - K,\,0)\bigr]
\]</span> This principle underlies each pricing module, with differences only in how <span class="math inline">\(\mathbb{E}^{\mathbb{Q}}[\cdot]\)</span> is evaluated.</p>
</section>
<section id="underlying-price-retrieval" class="level3">
<h3 class="anchored" data-anchor-id="underlying-price-retrieval">1.2 Underlying Price Retrieval</h3>
<p>While not central to academic exposition, the app can fetch live or historical <span class="math inline">\(S_0\)</span> data via APIs (e.g., Yahoo Finance using <code>pandas_datareader</code>), enabling calibration to current market levels. Caching ensures efficient repeated queries for historical series used in implied volatility estimation or empirical calibration tasks.</p>
<hr>
</section>
</section>
<section id="blackscholes-analytical-module" class="level2">
<h2 class="anchored" data-anchor-id="blackscholes-analytical-module">2. Black–Scholes Analytical Module</h2>
<section id="assumptions-and-pde-derivation" class="level3">
<h3 class="anchored" data-anchor-id="assumptions-and-pde-derivation">2.1 Assumptions and PDE Derivation</h3>
<p>Assume <span class="math inline">\(S_t\)</span> follows geometric Brownian motion under <span class="math inline">\(\mathbb{Q}\)</span>:</p>
<p><span class="math display">\[
  dS_t = r\,S_t\,dt + \sigma\,S_t\,dW_t
\]</span> where <span class="math inline">\(W_t\)</span> is a standard Wiener process. By applying Itô’s lemma to the option price function <span class="math inline">\(V(S,t)\)</span> and constructing a risk‐free hedge portfolio, one deduces the Black–Scholes PDE:</p>
<p><span class="math display">\[
  \frac{\partial V}{\partial t} + \tfrac{1}{2}\sigma^2 S^2 \frac{\partial^2 V}{\partial S^2} + r S\,\frac{\partial V}{\partial S} - r V = 0
\]</span> with terminal condition <span class="math inline">\(V(S,T) = \max(S - K,\,0)\)</span>.</p>
</section>
<section id="closedform-solution-and-greeks" class="level3">
<h3 class="anchored" data-anchor-id="closedform-solution-and-greeks">2.2 Closed‐Form Solution and Greeks</h3>
<p>Solving the PDE yields the classical formula: <span class="math display">\[
  C = S_0\,\Phi(d_1) - K e^{-rT}\,\Phi(d_2),
  \quad
  P = K e^{-rT}\,\Phi(-d_2) - S_0\,\Phi(-d_1),
\]</span></p>
<p>where <span class="math inline">\(d_{1,2}\)</span> are defined as above. From this expression, one derives <strong>Greeks</strong>:</p>
<ul>
<li><p><strong>Delta</strong>: <span class="math inline">\(\Delta = \Phi(d_1)\)</span> (call) or <span class="math inline">\(\Phi(d_1) - 1\)</span> (put).</p></li>
<li><p><strong>Gamma</strong>: <span class="math inline">\(\Gamma = \frac{\phi(d_1)}{S_0 \sigma \sqrt{T}}\)</span>, with <span class="math inline">\(\phi(\cdot)\)</span> the standard normal density.</p></li>
<li><p><strong>Vega</strong>: <span class="math inline">\(\nu = S_0 \phi(d_1) \sqrt{T}\)</span>.</p></li>
<li><p><strong>Theta</strong>, <strong>Rho</strong>: computed via partial derivatives w.r.t. <span class="math inline">\(t\)</span> and <span class="math inline">\(r\)</span>.</p></li>
</ul>
</section>
<section id="academic-considerations" class="level3">
<h3 class="anchored" data-anchor-id="academic-considerations">2.3 Academic Considerations</h3>
<ul>
<li><p><strong>Model Limitations</strong>: Constant volatility and risk‐free rate, no jumps, continuous trading—assumptions that fail in practice (Bakshi, Cao, &amp; Chen, 1997).</p></li>
<li><p><strong>Boundary Behavior</strong>: As <span class="math inline">\(\sigma \to 0\)</span>, <span class="math inline">\(C \to \max(S_0 - K,\,0)\)</span>; as <span class="math inline">\(T \to 0\)</span>, <span class="math inline">\(C\)</span> approaches intrinsic value.</p></li>
<li><p><strong>Implied Volatility</strong>: Invert the above formula to solve for <span class="math inline">\(\sigma_{\text{imp}}\)</span> given a market price <span class="math inline">\(C_{\text{mkt}}\)</span>, yielding the implied‐volatility surface often studied in academic research (Gatheral, 2006).</p></li>
</ul>
<hr>
</section>
</section>
<section id="recombining-binomial-lattice-module" class="level2">
<h2 class="anchored" data-anchor-id="recombining-binomial-lattice-module">3. Recombining Binomial Lattice Module</h2>
<section id="discretetime-approximation" class="level3">
<h3 class="anchored" data-anchor-id="discretetime-approximation">3.1 Discrete‐Time Approximation</h3>
<p>Partition <span class="math inline">\([0, T]\)</span> into <span class="math inline">\(M\)</span> steps of size <span class="math inline">\(\Delta t = T/M\)</span>. At each node <span class="math inline">\(j\)</span> (time <span class="math inline">\(j \Delta t\)</span>), the underlying price takes values: <span class="math display">\[
  S_{j,i} = S_0 \,u^i \,d^{\,j - i},
  \quad
  u = e^{\sigma \sqrt{\Delta t}},
  \quad
  d = e^{-\sigma \sqrt{\Delta t}}
\]</span> for <span class="math inline">\(i = 0, 1, \dots, j\)</span>. This recombining structure yields <span class="math inline">\(\tfrac{1}{2}(M+1)(M+2)\)</span> nodes in total.</p>
</section>
<section id="riskneutral-probabilities-and-backward-induction" class="level3">
<h3 class="anchored" data-anchor-id="riskneutral-probabilities-and-backward-induction">3.2 Risk‐Neutral Probabilities and Backward Induction</h3>
<p>At each step: <span class="math display">\[
  p = \frac{e^{r\Delta t} - d}{u - d},
  \quad
  1 - p = \frac{u - e^{r\Delta t}}{u - d}
\]</span> Initialise at maturity (<span class="math inline">\(j=M\)</span>) with terminal payoffs: <span class="math display">\[
  V_{M,i} = \max\bigl(S_{M,i} - K,\,0\bigr)
\]</span> Then, for <span class="math inline">\(j = M-1,\,M-2,\,\ldots,\,0\)</span> and <span class="math inline">\(i = 0,\ldots,j\)</span>: <span class="math display">\[
  V_{j,i} = e^{-r \Delta t}\bigl[p\,V_{j+1,i+1} \;+\; (1-p)\,V_{j+1,i}\bigr]
\]</span> The root node <span class="math inline">\(V_{0,0}\)</span> yields the binomial implied option price.</p>
</section>
<section id="convergence-analysis" class="level3">
<h3 class="anchored" data-anchor-id="convergence-analysis">3.3 Convergence Analysis</h3>
<ul>
<li><p><strong>Bias</strong>: For European options, the binomial price exhibits bias <span class="math inline">\(O(1/M)\)</span> relative to Black–Scholes (Phelim P. Boyle, 1977).</p></li>
<li><p><strong>Computational Complexity</strong>: Building and rolling back the tree is <span class="math inline">\(O(M^2)\)</span>. In an interactive setting, practical ceiling for <span class="math inline">\(M\)</span> might be <span class="math inline">\(100\)</span>–<span class="math inline">\(500\)</span> to maintain responsiveness.</p></li>
</ul>
</section>
<section id="extensions" class="level3">
<h3 class="anchored" data-anchor-id="extensions">3.4 Extensions</h3>
<ul>
<li><strong>American Options</strong>: By replacing the backward‐induction formula with<br>
[ V_{j,i} = ((S_{j,i} - K,0),;e^{-r t}[,p,V_{j+1,i+1} + (1-p),V_{j+1,i},]), ]<br>
one can handle early exercise features (Cox, Ross, &amp; Rubinstein, 1979; Hull, 2018). Although not the app’s primary focus, the framework is readily adaptable.</li>
</ul>
<hr>
</section>
</section>
<section id="monte-carlo-simulation-module" class="level2">
<h2 class="anchored" data-anchor-id="monte-carlo-simulation-module">4. Monte Carlo Simulation Module</h2>
<section id="geometric-brownian-motion-sampling" class="level3">
<h3 class="anchored" data-anchor-id="geometric-brownian-motion-sampling">4.1 Geometric Brownian Motion Sampling</h3>
<p>Under the risk‐neutral measure, simulate terminal prices <span class="math inline">\(S_T\)</span> as: <span class="math display">\[
  S_T^{(k)} = S_0 \exp\Bigl[\bigl(r - \tfrac{1}{2}\sigma^2\bigr)T + \sigma \sqrt{T}\,Z^{(k)}\Bigr],
  \quad
  Z^{(k)} \sim \mathcal{N}(0,1),
  \quad
  k = 1,2,\dots,N
\]</span> Alternatively, for path‐dependent extensions, discretize intermediate times <span class="math inline">\(t_1, t_2, \ldots, t_{M-1}\)</span> with the Euler-Maruyama method.</p>
</section>
<section id="payoff-averaging-and-discounting" class="level3">
<h3 class="anchored" data-anchor-id="payoff-averaging-and-discounting">4.2 Payoff Averaging and Discounting</h3>
<p>Compute the payoff for each simulated path: <span class="math display">\[
  \pi^{(k)} = \max\bigl(S_T^{(k)} - K,\,0\bigr)
\]</span> then estimate: <span class="math display">\[
  \hat{C}_{\text{MC}} = e^{-rT}\,\frac{1}{N}\sum_{k=1}^N \pi^{(k)}
\]</span> By the Central Limit Theorem,<br>
<span class="math display">\[
  \text{SE}\bigl(\hat{C}_{\text{MC}}\bigr) = O\bigl(\sigma_{\pi}/\sqrt{N}\bigr)
\]</span> where <span class="math inline">\(\sigma_{\pi}\)</span> is the standard deviation of the discount‐adjusted payoffs (Glasserman, 2004).</p>
</section>
<section id="variance-reduction-techniques-optional" class="level3">
<h3 class="anchored" data-anchor-id="variance-reduction-techniques-optional">4.3 Variance Reduction Techniques (Optional)</h3>
<ul>
<li><p><strong>Antithetic Variates</strong>: Simultaneously simulate <span class="math inline">\(Z\)</span> and <span class="math inline">\(-Z\)</span> to reduce variance (Boyle, 1977).</p></li>
<li><p><strong>Control Variates</strong>: Use the known Black–Scholes price as a control:<br>
<span class="math display">\[
  \hat{C}_{\text{CV}} = \hat{C}_{\text{MC}} + \beta\bigl(C_{\text{BS}} - \hat{C}_{\text{BS,MC}}\bigr)
\]</span> where <span class="math inline">\(\hat{C}_{\text{BS,MC}}\)</span> is the Monte Carlo estimate under Black–Scholes dynamics and <span class="math inline">\(\beta\)</span> is chosen to minimise variance.</p></li>
<li><p><strong>Quasi-Monte Carlo</strong>: Employ low-discrepancy sequences (Sobol, Halton) to accelerate convergence (Caflisch, 1998).</p></li>
</ul>
</section>
<section id="computational-considerations" class="level3">
<h3 class="anchored" data-anchor-id="computational-considerations">4.4 Computational Considerations</h3>
<ul>
<li><p><strong>Path Count vs.&nbsp;Accuracy</strong>: In practice, <span class="math inline">\(N\)</span> may range from <span class="math inline">\(10^4\)</span> to <span class="math inline">\(10^6\)</span>. Within an interactive app, default <span class="math inline">\(N\approx10^4\)</span>–<span class="math inline">\(5\times10^4\)</span> balances speed and precision.</p></li>
<li><p><strong>Parallelisation</strong>: Vectorised operations (NumPy) or GPU acceleration can reduce runtime, but browser‐based constraints often limit batch sizes.</p></li>
</ul>
<hr>
</section>
</section>
<section id="convergence-and-sensitivity-analysis-module" class="level2">
<h2 class="anchored" data-anchor-id="convergence-and-sensitivity-analysis-module">5. Convergence and Sensitivity Analysis Module</h2>
<section id="empirical-convergence-studies" class="level3">
<h3 class="anchored" data-anchor-id="empirical-convergence-studies">5.1 Empirical Convergence Studies</h3>
<ul>
<li><p><strong>Binomial vs.&nbsp;Black–Scholes</strong>: For fixed <span class="math inline">\((S_0,K,T,r,\sigma)\)</span>, compute binomial prices for <span class="math inline">\(M = \{50, 100, 200, 400\}\)</span> and plot <span class="math inline">\(\lvert V_{0,0}^{(M)} - C_{\text{BS}}\rvert\)</span> versus <span class="math inline">\(M\)</span>, verifying <span class="math inline">\(O(1/M)\)</span> decay.</p></li>
<li><p><strong>Monte Carlo Error Scaling</strong>: For <span class="math inline">\(N = \{10^3, 10^4, 10^5\}\)</span>, plot standard error of <span class="math inline">\(\hat{C}_{\text{MC}}\)</span> against <span class="math inline">\(1/\sqrt{N}\)</span> to confirm theoretical rate. These plots reinforce academic understanding of bias–variance trade-offs.</p></li>
</ul>
</section>
<section id="sensitivity-greek-visualisation" class="level3">
<h3 class="anchored" data-anchor-id="sensitivity-greek-visualisation">5.2 Sensitivity (Greek) Visualisation</h3>
<ul>
<li><p><strong>Delta Approximation</strong>: Numerically estimate <span class="math inline">\(\Delta \approx \frac{V(S_0 + \delta) - V(S_0 - \delta)}{2\delta}\)</span> for small <span class="math inline">\(\delta\)</span>, comparing to the analytical <span class="math inline">\(\Phi(d_1)\)</span>.</p></li>
<li><p><strong>Gamma and Vega</strong>: Similar finite-difference approximations versus closed-form Greek expressions. Visualisation of Greeks across <span class="math inline">\(S_0\in[0.5K,\,1.5K]\)</span> or <span class="math inline">\(\sigma\in[0.1,\,0.5]\)</span> elucidates risk sensitivities.</p></li>
</ul>
<hr>
</section>
</section>
<section id="visualisation-and-user-interface" class="level2">
<h2 class="anchored" data-anchor-id="visualisation-and-user-interface">6. Visualisation and User Interface</h2>
<p>While the <strong>Streamlit interface</strong> is not the focus here, certain UI elements underscore academic utility:</p>
<ul>
<li><p><strong>Dynamic Input Widgets</strong>: Sliders for <span class="math inline">\(\sigma\)</span> and <span class="math inline">\(T\)</span>, date pickers for expiration, numeric fields for <span class="math inline">\(S_0\)</span> and <span class="math inline">\(K\)</span> facilitate real‐time experimentation.</p></li>
<li><p><strong>Tabulated Outputs</strong>: Side‐by‐side display of Black–Scholes, binomial, and Monte Carlo prices for calls and puts promotes direct comparison.</p></li>
<li><p><strong>Graphs</strong>:</p>
<ul>
<li><p><strong>Convergence Plots</strong> (binomial error vs.&nbsp;<span class="math inline">\(M\)</span>; Monte Carlo standard error vs.&nbsp;<span class="math inline">\(N\)</span>).<br>
</p></li>
<li><p><strong>Payoff Histogram</strong>: Distribution of discounted Monte Carlo payoffs at maturity.</p></li>
<li><p><strong>Greek Surface</strong>: 3D or contour plots of delta/gamma as functions of <span class="math inline">\(S_0\)</span> and <span class="math inline">\(\sigma\)</span>.</p></li>
<li><p><strong>Binomial Tree Heatmap</strong>: Visual representation of option values at lattice nodes.</p></li>
</ul></li>
</ul>
<p>These interactive visualisations transform abstract mathematical concepts into tangible insights, fostering deeper comprehension among students.</p>
<hr>
</section>
</section>
<section id="discussion" class="level1">
<h1>Discussion</h1>
<section id="comparative-analysis-of-pricing-methods" class="level3">
<h3 class="anchored" data-anchor-id="comparative-analysis-of-pricing-methods">1. Comparative Analysis of Pricing Methods</h3>
<ul>
<li><p><strong>Analytical vs.&nbsp;Numerical</strong></p>
<ul>
<li><p>The <strong>Black–Scholes</strong> formula is <span class="math inline">\(O(1)\)</span> per evaluation, providing immediate results and exact Greeks under model assumptions. However, it fails when assumptions break (e.g., discrete dividends, early exercise).</p></li>
<li><p>The <strong>Binomial Lattice</strong> converges deterministically to the Black–Scholes price for European options as <span class="math inline">\(M\to\infty\)</span> (bias <span class="math inline">\(O(1/M)\)</span>) and can be adapted to American‐style claims. Its computational cost is <span class="math inline">\(O(M^2)\)</span>, which can become burdensome for large <span class="math inline">\(M\)</span> in an interactive setting.</p></li>
<li><p><strong>Monte Carlo Simulation</strong> offers versatility for complex payoff structures and alternative stochastic dynamics. Its computational complexity scales as <span class="math inline">\(O(N)\)</span> per path generation (assuming one‐step paths) with random error <span class="math inline">\(O(1/\sqrt{N})\)</span>. For European options, Monte Carlo is slower and less precise than binomial or analytical methods, but it excels when no closed‐form exists.</p></li>
</ul></li>
<li><p><strong>Error Sources and Trade-Offs</strong></p>
<ul>
<li><p><strong>Binomial Bias</strong>: Even with <span class="math inline">\(M=500\)</span>, the binomial price may deviate by a few basis points from Black–Scholes, which is critical when calibrating models to market quotes.</p></li>
<li><p><strong>Monte Carlo Variance</strong>: Without variance reduction, Monte Carlo prices may exhibit standard errors of similar magnitude for <span class="math inline">\(N=10^4\)</span>, making the method impractical for sub‐<span class="math inline">\(0.01\)</span> tolerance unless <span class="math inline">\(N\)</span> is large or advanced techniques (e.g., antithetic variates) are employed.</p></li>
</ul></li>
</ul>
</section>
<section id="pedagogical-insights" class="level3">
<h3 class="anchored" data-anchor-id="pedagogical-insights">2. Pedagogical Insights</h3>
<ul>
<li><p><strong>Intuition Behind Greeks</strong>: Visualising how delta approaches a Heaviside step function as <span class="math inline">\(T\to0\)</span> or how vega peaks at at‐the‐money options underscores theoretical derivations in coursework.</p></li>
<li><p><strong>Reality of Discretisation</strong>: Empirical demonstration that binomial trees converge slowly for deep‐in or deep‐out‐of‐the‐money options can prompt discussion on using Richardson extrapolation or finite‐difference PDE solvers.</p></li>
<li><p><strong>Monte Carlo Variance</strong>: Observing noisy payoff distributions motivates study of variance reduction and importance sampling in computational finance curricula.</p></li>
</ul>
</section>
<section id="research-and-extension-potential" class="level3">
<h3 class="anchored" data-anchor-id="research-and-extension-potential">3. Research and Extension Potential</h3>
<ul>
<li><p><strong>Stochastic Volatility Models</strong></p>
<ul>
<li><strong>Heston Model (1993)</strong>: Characteristic‐function methods (Fourier inversion) afford semi‐analytical pricing. Integrating a Heston module would require implementing numeric inversion (e.g., Carr–Madan) or using complex‐valued integrals, illustrating advanced quantitative techniques (Heston, 1993; Lord, Fang, Bervoets, &amp; Oosterlee, 2008).</li>
</ul></li>
<li><p><strong>Jump‐Diffusion and Lévy Processes</strong></p>
<ul>
<li><strong>Merton’s Jump‐Diffusion (1976)</strong> combines a Poisson‐jump component with Brownian motion, capturing leptokurtic features. Pricing requires summing over jump counts or using Fourier approaches, thereby enriching the app’s scope.</li>
</ul></li>
<li><p><strong>Finite‐Difference PDE Solvers</strong></p>
<ul>
<li>For exotic payoffs (barrier, Asian, lookback), closed‐form solutions may not exist. Implementing Crank–Nicolson or explicit/implicit finite‐difference schemes offers hands‐on experience with numerical PDE techniques (Wilmott, Howison, &amp; Dewynne, 1995).</li>
</ul></li>
<li><p><strong>Implied Volatility Surface Analysis</strong></p>
<ul>
<li>By retrieving market quotes for various strikes and maturities, students can invert to implied volatilities and plot the volatility smile/surface. This empirical exercise underscores limitations of constant‐volatility models and introduces local vol or stochastic vol calibration.</li>
</ul></li>
<li><p><strong>American Option Pricing</strong></p>
<ul>
<li>Extending the binomial framework to include early‐exercise features invites discussion on free‐boundary problems and exercise boundaries, bridging discrete and continuous models (Broadie &amp; Detemple, 1996).</li>
</ul></li>
</ul>
</section>
<section id="limitations-and-practical-considerations" class="level3">
<h3 class="anchored" data-anchor-id="limitations-and-practical-considerations">4. Limitations and Practical Considerations</h3>
<ul>
<li><p><strong>Model Risk</strong>: All modules assume specific stochastic dynamics (e.g., geometric Brownian motion). Real markets exhibit stochastic volatility, jumps, and regime changes that these modules do not capture.</p></li>
<li><p><strong>Computational Constraints</strong>: In a browser‐based interface, high <span class="math inline">\(M\)</span> or <span class="math inline">\(N\)</span> values may exceed time budgets. Caching and sensible defaults mitigate this but limit extreme parameter exploration.</p></li>
<li><p><strong>Data Latency and Quality</strong>: If employing live market data, API delays or stale quotes can distort valuations. Academics should be aware that calibration to historical data may not translate to real‐time performance.</p></li>
</ul>
<hr>
</section>
</section>
<section id="conclusion-and-future-directions" class="level1">
<h1>Conclusion and Future Directions</h1>
<p><strong>Key Takeaways:</strong></p>
<ol type="1">
<li><p><strong>Unified Pedagogical Platform</strong>: The Option Pricing Streamlit App integrates three core valuation methodologies, facilitating comparative learning about model assumptions, convergence behavior, and computational trade‐offs.</p></li>
<li><p><strong>Empirical Learning</strong>: Interactive sliders and live visual feedback deepen intuition on how volatility, maturity, and strike influence prices and Greeks, reinforcing theoretical constructs from classic texts (Black &amp; Scholes, 1973; Cox, Ross, &amp; Rubinstein, 1979; Hull, 2018).</p></li>
<li><p><strong>Research Foundation</strong>: Modular architecture invites extension to more sophisticated frameworks—stochastic volatility, jump processes, finite‐difference solvers, and implied‐volatility calibration—making it a springboard for graduate‐level projects or exploratory research.</p></li>
</ol>
<p><strong>Future Research Directions:</strong></p>
<ul>
<li><p><strong>Adaptive Calibration</strong>: Implement rolling calibration routines that update <span class="math inline">\(\sigma\)</span> or other parameters to minimise pricing errors against real‐time market quotes, thereby exploring market‐microstructure effects on implied parameters.</p></li>
<li><p><strong>Advanced Numerical Techniques</strong>: Integrate Fourier transform methods (Carr &amp; Madan, 1999) for Lévy‐driven models, or tree‐based schemes with Richardson extrapolation to accelerate convergence.</p></li>
<li><p><strong>Machine Learning Integration</strong>: Investigate data‐driven approaches to approximate pricing functions (e.g., neural networks as function approximators for option prices across parameter grids) to achieve “instantaneous” valuations for large portfolios (Han, Jentzen, &amp; E, 2018).</p></li>
<li><p><strong>Risk Management Extensions</strong>: Embed dynamic hedging simulations to track P&amp;L under delta‐ or vega‐neutral strategies, exploring discrete rebalancing errors and transaction costs.</p></li>
</ul>
<p>By presenting a cohesive academic framework, this overview underscores how the Option Pricing Streamlit App transcends a mere code repository to become a dynamic pedagogical and research instrument. It embodies the synergy between mathematical finance theory and computational experimentation, charting a path for continued scholarly exploration.</p>
<hr>
</section>
<section id="references" class="level1">
<h1>References</h1>
<ul>
<li><p>Black, F., &amp; Scholes, M. (1973). The Pricing of Options and Corporate Liabilities. <em>Journal of Political Economy</em>, 81(3), 637–654.</p></li>
<li><p>Broadie, M., &amp; Detemple, J. (1996). American Option Valuation: New Bounds, Approximations, and a Comparison of Existing Methods. <em>Review of Financial Studies</em>, 9(4), 1211–1250.</p></li>
<li><p>Broadie, M., &amp; Glasserman, P. (1996). Estimating Security Price Derivatives Using Simulation. <em>Management Science</em>, 42(2), 269–285.</p></li>
<li><p>Boyle, P. P. (1977). Options: A Monte Carlo Approach. <em>Journal of Financial Economics</em>, 4(3), 323–338.</p></li>
<li><p>Boyle, P. P., Broadie, M., &amp; Glasserman, P. (1997). Monte Carlo Methods for Security Pricing. <em>Journal of Economic Dynamics and Control</em>, 21(8–9), 1267–1321.</p></li>
<li><p>Carr, P., &amp; Madan, D. (1999). Option Valuation Using the Fast Fourier Transform. <em>Journal of Computational Finance</em>, 2(4), 61–73.</p></li>
<li><p>Caflisch, R. E. (1998). Monte Carlo and Quasi‐Monte Carlo Methods. <em>Acta Numerica</em>, 7, 1–49.</p></li>
<li><p>Cox, J. C., Ross, S. A., &amp; Rubinstein, M. (1979). Option Pricing: A Simplified Approach. <em>Journal of Financial Economics</em>, 7(3), 229–263.</p></li>
<li><p>Gatheral, J. (2006). <em>The Volatility Surface: A Practitioner’s Guide</em>. Wiley.</p></li>
<li><p>Glasserman, P. (2004). <em>Monte Carlo Methods in Financial Engineering</em>. Springer.</p></li>
<li><p>Heston, S. L. (1993). A Closed‐Form Solution for Options with Stochastic Volatility with Applications to Bond and Currency Options. <em>Review of Financial Studies</em>, 6(2), 327–343.</p></li>
<li><p>Hull, J. C. (2018). <em>Options, Futures, and Other Derivatives</em> (10th ed.). Pearson.</p></li>
<li><p>Kloeden, P. E., &amp; Platen, E. (1992). <em>Numerical Solution of Stochastic Differential Equations</em>. Springer.</p></li>
<li><p>Lord, R., Fang, F., Bervoets, F., &amp; Oosterlee, C. W. (2008). A Fast and Accurate FFT‐Based Method for Pricing Early‐Exercise Options Under Lévy Processes. <em>SIAM Journal on Scientific Computing</em>, 30(4), 1678–1705.</p></li>
<li><p>Merton, R. C. (1973). Theory of Rational Option Pricing. <em>The Bell Journal of Economics and Management Science</em>, 4(1), 141–183.</p></li>
<li><p>Merton, R. C. (1976). Option Pricing When Underlying Stock Returns Are Discontinuous. <em>Journal of Financial Economics</em>, 3(1–2), 125–144.</p></li>
<li><p>Phelim P. Boyle. (1977). Options: A Monte Carlo Approach. <em>Journal of Financial Economics</em>, 4(3), 323–338.</p></li>
<li><p>Wilmott, P., Howison, S., &amp; Dewynne, J. (1995). <em>The Mathematics of Financial Derivatives: A Student Introduction</em>. Cambridge University Press.</p></li>
<li><p>Han, J., Jentzen, A., &amp; E, W. (2018). Solving High‐Dimensional Partial Differential Equations Using Deep Learning. <em>Proceedings of the National Academy of Sciences</em>, 115(34), 8505–8510.</p></li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>
